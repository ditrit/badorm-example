# Example of BaDorm

This is a example of how to use BaDorm in two variations: standalone and with uber fx, each one of them in its corresponding folder. If you are interested in using BaDorm in a BaDaaS application please check the [BaDaaS example](https://github.com/ditrit/badaas-example).

## Generate conditions

After choosing the example you want to run (`cd standalone` or `cd fx`) you will need to generate the conditions for the models using `BaDctl`.

Install `BaDctl`:

<!-- TODO delete commit on first tagged version -->
```bash
go install github.com/ditrit/badaas/tools/badctl@cf3141d
```

Generate conditions:

```bash
go generate ./...
```

For details visit [badctl docs](github.com/ditrit/badaas/tools/badctl/README.md#gen-conditions).

## Run it

First, we need a database to store the data, in this case we will use CockroachDB:

```bash
docker compose up -d
```

After that, we can run the application:

```bash
go run .
```

And you should see something like:

```bash
2023/05/16 09:52:03 Setting up CRUD example
2023/05/16 09:52:03 Finished creating CRUD example
2023/05/16 09:52:03 Products with int = 1 are:
&{UUIDModel:{ID:1483487f-c585-4455-8d5b-2a58be27acbc CreatedAt:2023-05-16 09:50:12.025843 +0200 CEST UpdatedAt:2023-05-16 09:50:12.025843 +0200 CEST DeletedAt:{Time:0001-01-01 00:00:00 +0000 UTC Valid:false}} String: Int:1 Float:0 Bool:false}
```

## Explore it

In [main.go](main.go) you will find the configuration required to use the BaDorm: provide a GormDB connection, start the BaDorm module and create the CRUD services.

In [example.go](example.go) you will find the actual example, where objects are created and then queried using BaDorm.

In [models.go](models/models.go) you will find the models definition.

In [conditions](conditions/) you will find the conditions generated by badctl that allow you query the models in `example.go`.

## Go deeper

For more details, visit [BaDorm docs](https://github.com/ditrit/badaas/badorm/README.md).
